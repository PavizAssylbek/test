{"ast":null,"code":"var __jsx = React.createElement;\nimport React from 'react';\nimport Head from 'next/head';\nimport RegistrationLayout from '../../components/RegistrationLayout';\nimport { Cookies } from 'react-cookie';\nimport styles from './styles.module.scss';\nimport clsx from 'clsx';\nimport InputComponent from '../../components/InputComponent';\nimport { Link } from '../../../i18n';\nimport { useRouter } from 'next/router';\nconst cookies = new Cookies();\n\nfunction Login({}) {\n  const route = useRouter();\n  const [activeItem, setActiveItem] = React.useState(0);\n  const [login, setLogin] = React.useState('');\n  const [password, setPassword] = React.useState('');\n  const btnText = ['ЭЦП', 'Логин'];\n\n  const onSelectItem = id => {\n    setActiveItem(id);\n  };\n\n  async function signIn() {\n    const formdata = new FormData();\n    formdata.append(\"username\", login);\n    formdata.append(\"password\", password);\n    const data = await fetch(\"http://127.0.0.1:8000/api/login\", {\n      method: 'POST',\n      body: formdata\n    });\n    const loginResponse = await data.json();\n\n    if (loginResponse.content !== null) {\n      cookies.set(\"token\", loginResponse.content);\n      setLogin('');\n      setPassword('');\n      route.push('/');\n    } else {\n      alert(\"Error man\");\n    }\n  }\n\n  return __jsx(RegistrationLayout, null, __jsx(Head, null, __jsx(\"title\", null, \"Tourism: Online\")), __jsx(\"div\", {\n    className: styles.login\n  }, __jsx(\"h6\", null, \"\\u0412\\u0445\\u043E\\u0434 \\u0432 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u0443\"), __jsx(\"div\", {\n    className: styles.login_btn\n  }, btnText && btnText.map((el, i) => __jsx(\"button\", {\n    className: clsx(activeItem === i ? styles.login_active : ''),\n    onClick: () => activeItem !== i ? onSelectItem(i) : '',\n    key: i\n  }, el))), activeItem === 0 ? __jsx(\"div\", {\n    className: clsx(styles.login_bg, 'border-radius')\n  }, __jsx(\"div\", {\n    className: clsx(styles.login_download, 'border-radius')\n  }, __jsx(\"div\", null, __jsx(\"img\", {\n    src: \"/download.svg\",\n    alt: \"#\"\n  }), \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C\"))) : __jsx(\"div\", {\n    className: clsx(styles.login_bg, 'border-radius')\n  }, __jsx(\"form\", null, __jsx(InputComponent, {\n    type: 'text',\n    place: 'Логин',\n    value: login,\n    onChange: setLogin\n  }), __jsx(InputComponent, {\n    type: 'password',\n    place: 'Пароль',\n    value: password,\n    onChange: setPassword\n  }), __jsx(InputComponent, {\n    onClick: signIn,\n    className: 'submit',\n    type: 'button',\n    place: '',\n    value: 'Вход'\n  })), __jsx(Link, {\n    href: \"/\"\n  }, __jsx(\"a\", {\n    className: styles.login_forgot\n  }, \"\\u0417\\u0430\\u0431\\u044B\\u043B\\u0438 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C \\u0438\\u043B\\u0438 \\u043B\\u043E\\u0433\\u0438\\u043D?\")), __jsx(Link, {\n    href: \"/regis\"\n  }, __jsx(\"a\", {\n    className: styles.login_reg\n  }, \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\")))));\n}\n\nexport default Login;","map":null,"metadata":{},"sourceType":"module"}